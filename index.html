<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exerciții cu document.cookie</title>
  <link rel="stylesheet" href="https://unpkg.com/minimal-css@1.0.0/minimal.css">
  <style>
    body { padding: 2rem; }
    section { margin-bottom: 2rem; }
    code { background: #f4f4f4; padding: 0.5rem; display: block; }
  </style>
</head>
<body>
  <h1>Exerciții cu document.cookie</h1>

  <!-- Exercițiul 1: Setarea și afișarea cookie-urilor -->
  <section>
    <h2>1. Setarea și afișarea cookie-urilor</h2>
    <button onclick="setCookies()">Setează cookie-uri</button>
    <button onclick="showCookies()">Afișează cookie-uri</button>
    <button onclick="clearOutput('cookies-output')">Curăță</button>
    <code id="cookies-output"></code>
  </section>

  <!-- Exercițiul 2: Obținerea unei valori specifice a unui cookie -->
  <section>
    <h2>2. Obținerea unei valori specifice a unui cookie</h2>
    <button onclick="getSpecificCookie()">Obține valoarea cookie-ului 'test2'</button>
    <button onclick="clearOutput('specific-cookie-output')">Curăță</button>
    <code id="specific-cookie-output"></code>
  </section>

  <!-- Exercițiul 3: Executarea unei acțiuni o singură dată -->
  <section>
    <h2>3. Executarea unei acțiuni o singură dată</h2>
    <button onclick="doOnce()">Execută o dată</button>
    <button onclick="clearOutput('do-once-output')">Curăță</button>
    <code id="do-once-output"></code>
  </section>

  <!-- Exercițiul 4: Resetarea cookie-ului anterior -->
  <section>
    <h2>4. Resetarea cookie-ului anterior</h2>
    <button onclick="resetOnce()">Resetează cookie-ul</button>
    <button onclick="clearOutput('reset-once-output')">Curăță</button>
    <code id="reset-once-output"></code>
  </section>

  <!-- Exercițiul 5: Verificarea existenței unui cookie -->
  <section>
    <h2>5. Verificarea existenței unui cookie</h2>
    <button onclick="checkCookieExists()">Verifică existența cookie-ului 'reader'</button>
    <button onclick="clearOutput('cookie-exists-output')">Curăță</button>
    <code id="cookie-exists-output"></code>
  </section>

  <!-- Exercițiul 6: Verificarea valorii unui cookie -->
  <section>
    <h2>6. Verificarea valorii unui cookie</h2>
    <button onclick="checkCookieValue()">Verifică dacă 'reader' are valoarea '1'</button>
    <button onclick="clearOutput('cookie-value-output')">Curăță</button>
    <code id="cookie-value-output"></code>
  </section>

  <script>
    // Exercițiul 1
    function setCookies() {
      document.cookie = "name=Oeschger; SameSite=None; Secure";
      document.cookie = "favorite_food=tripe; SameSite=None; Secure";
    }

    function showCookies() {
      const output = document.getElementById("cookies-output");
      output.textContent = `> ${document.cookie}`;
    }

    // Exercițiul 2
    function getSpecificCookie() {
      document.cookie = "test1=Hello; SameSite=None; Secure";
      document.cookie = "test2=World; SameSite=None; Secure";
      const cookieValue = document.cookie
        .split("; ")
        .find((row) => row.startsWith("test2="))
        ?.split("=")[1];
      const output = document.getElementById("specific-cookie-output");
      output.textContent = `> ${cookieValue}`;
    }

    // Exercițiul 3
    function doOnce() {
      if (
        !document.cookie
          .split("; ")
          .find((row) => row.startsWith("doSomethingOnlyOnce"))
      ) {
        document.cookie =
          "doSomethingOnlyOnce=true; expires=Fri, 31 Dec 9999 23:59:59 GMT; SameSite=None; Secure";
        const output = document.getElementById("do-once-output");
        output.textContent = "> Acțiune executată!";
      }
    }

    // Exercițiul 4
    function resetOnce() {
      document.cookie =
        "doSomethingOnlyOnce=; expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=None; Secure";
      const output = document.getElementById("reset-once-output");
      output.textContent = "> Cookie resetat!";
    }

    // Exercițiul 5
    function checkCookieExists() {
      document.cookie = "reader=1; SameSite=None; Secure";
      if (
        document.cookie.split(";").some((item) => item.trim().startsWith("reader="))
      ) {
        const output = document.getElementById("cookie-exists-output");
        output.textContent = '> Cookie-ul "reader" există';
      }
    }

    // Exercițiul 6
    function checkCookieValue() {
      if (document.cookie.split(";").some((item) => item.includes("reader=1"))) {
        const output = document.getElementById("cookie-value-output");
        output.textContent = '> Cookie-ul "reader" are valoarea "1"';
      }
    }

    // Funcție auxiliară pentru curățarea output-ului
    function clearOutput(id) {
      document.getElementById(id).textContent = "";
    }
  </script>
</body>
</html>
